generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url = "***"
}

model Cheers {
  id           Int         @default(autoincrement()) @id
  userId       Int?
  userResultId Int?
  cheered      Boolean     @default(false)
  user         User?       @relation(fields: [userId], references: [id])
  result       UserResult? @relation(fields: [userResultId], references: [id])
}

model Post {
  id        Int          @default(autoincrement()) @id
  title     String
  content   String
  edited    Boolean?     @default(false)
  userId    Int?
  createdAt DateTime?
  user      User?        @relation(fields: [userId], references: [id])
  results   UserResult[]
}

model Profile {
  id            Int     @default(autoincrement()) @id
  bio           String?
  userId        Int?
  twitterHandle String?
  googleHandle  String?
  githubHandle  String?
  user          User?   @relation(fields: [userId], references: [id])
}

model User {
  id       Int          @default(autoincrement()) @id
  name     String
  email    String       @unique
  username String       @unique
  password String?
  cheers   Cheers[]
  posts    Post[]
  profile  Profile
  results  UserResult[]
}

model UserResult {
  id     Int      @default(autoincrement()) @id
  failed Boolean? @default(true)
  userId Int?
  postId Int?
  post   Post?    @relation(fields: [postId], references: [id])
  user   User?    @relation(fields: [userId], references: [id])
  cheers Cheers[]
}
