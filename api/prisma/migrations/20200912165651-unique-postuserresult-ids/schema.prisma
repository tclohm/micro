generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url = "***"
}

model Post {
  id             Int              @default(autoincrement()) @id
  title          String
  content        String
  createdAt      DateTime?        @default(dbgenerated())
  edited         Boolean?         @default(false)
  authorId       Int?
  author         User?            @relation(fields: [authorId], references: [id])
  postUserResult PostUserResult[]
}

model PostUserResult {
  id       Int     @default(autoincrement()) @id
  postId   Int?
  resultId Int?
  userId   Int?
  post     Post?   @relation(fields: [postId], references: [id])
  result   Result? @relation(fields: [resultId], references: [id])
  user     User?   @relation(fields: [userId], references: [id])

  @@unique([postId, resultId, userId])
}

model Profile {
  id            Int     @default(autoincrement()) @id
  bio           String?
  userId        Int?
  twitterHandle String?
  googleHandle  String?
  githubHandle  String?
  user          User?   @relation(fields: [userId], references: [id])
}

model Result {
  id             Int              @default(autoincrement()) @id
  failed         Boolean?         @default(true)
  postUserResult PostUserResult[]
}

model User {
  id              Int              @default(autoincrement()) @id
  name            String
  email           String           @unique
  username        String           @unique
  password        String?
  posts           Post[]
  postUserResults PostUserResult[]
  profile         Profile[]
}
